     <!DOCTYPE html>
     <html lang="en">
     <head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>Zenoti-QBO Integration</title>
     </head>
     <body>
       <div>
         <h1>Zenoti-QBO Integration</h1>
         <label for="apiKey">Zenoti API Key:</label>
         <input type="text" id="apiKey" placeholder="Enter API Key"><br><br>
         <label for="companyName">Company Name:</label>
         <input type="text" id="companyName" placeholder="Enter Company Name"><br><br>
         <button onclick="loadCenters()">Load Centers</button>
         <select id="centerSelect" disabled></select><br><br>
         <button onclick="generateAuthLink()" disabled>Generate QuickBooks Auth Link</button>
         <div id="status"></div><br>
         <label for="startDate">Start Date:</label>
         <input type="date" id="startDate"><br><br>
         <label for="endDate">End Date:</label>
         <input type="date" id="endDate"><br><br>
         <button onclick="syncData()" disabled>Sync Data</button>
         <div id="syncStatus"></div>
         <div id="syncDetails"></div>
       </div>

       <script>
         let centers = [];
         const apiKeyInput = document.getElementById('apiKey');
         const companyNameInput = document.getElementById('companyName');
         const centerSelect = document.getElementById('centerSelect');
         const statusDiv = document.getElementById('status');
         const startDateInput = document.getElementById('startDate');
         const endDateInput = document.getElementById('endDate');
         const syncStatusDiv = document.getElementById('syncStatus');
         const syncDetailsDiv = document.getElementById('syncDetails');

         apiKeyInput.addEventListener('input', enableButtons);
         companyNameInput.addEventListener('input', enableButtons);
         centerSelect.addEventListener('change', enableButtons);
         startDateInput.addEventListener('change', enableButtons);
         endDateInput.addEventListener('change', enableButtons);

         function enableButtons() {
           const authButton = document.querySelector('button:nth-of-type(2)');
           const syncButton = document.querySelector('button:nth-of-type(3)');
           authButton.disabled = !(apiKeyInput.value && companyNameInput.value && centerSelect.value);
           syncButton.disabled = !(apiKeyInput.value && companyNameInput.value && centerSelect.value && startDateInput.value && endDateInput.value);
         }

         async function loadCenters() {
           const apiKey = apiKeyInput.value;
           const companyName = companyNameInput.value;
           if (!apiKey || !companyName) {
             statusDiv.textContent = 'Please enter API Key and Company Name';
             return;
           }

           try {
             const response = await fetch('/api/centers', {
               method: 'POST',
               headers: { 'Content-Type': 'application/json' },
               body: JSON.stringify({ apiKey, companyName })
             });
             const data = await response.json();
             if (data.error) throw new Error(data.error);
             centers = data.centers;
             centerSelect.innerHTML = '<option value="">Select a center</option>';
             centers.forEach(center => {
               const option = document.createElement('option');
               option.value = center.id;
               option.textContent = center.name || center.id;
               centerSelect.appendChild(option);
             });
             centerSelect.disabled = false;
             statusDiv.textContent = 'Centers loaded successfully';
           } catch (error) {
             statusDiv.textContent = `Failed to load centers: ${error.message}`;
           }
         }

         async function generateAuthLink() {
           const apiKey = apiKeyInput.value;
           const companyName = companyNameInput.value;
           const centerId = centerSelect.value;
           if (!apiKey || !companyName || !centerId) {
             statusDiv.textContent = 'Please fill all fields';
             return;
           }

           try {
             const response = await fetch('/api/auth-link', {
               method: 'POST',
               headers: { 'Content-Type': 'application/json' },
               body: JSON.stringify({ apiKey, companyName, centerId })
             });
             const data = await response.json();
             if (data.error) throw new Error(data.error);
             statusDiv.innerHTML = `Authorization link generated. <a href="${data.authUrl}" target="_blank">Click to connect QuickBooks</a>`;
           } catch (error) {
             statusDiv.textContent = `Failed to generate auth link: ${error.message}`;
           }
         }

         async function syncData() {
           const apiKey = apiKeyInput.value;
           const companyName = companyNameInput.value;
           const centerId = centerSelect.value;
           const startDate = startDateInput.value;
           const endDate = endDateInput.value;
           if (!apiKey || !companyName || !centerId || !startDate || !endDate) {
             syncStatusDiv.textContent = 'Please fill all fields';
             return;
           }

           try {
             const response = await fetch('/api/sync', {
               method: 'POST',
               headers: { 'Content-Type': 'application/json' },
               body: JSON.stringify({ apiKey, companyName, centerId, startDate, endDate })
             });
             const data = await response.json();
             if (data.error) throw new Error(data.error);
             syncStatusDiv.textContent = 'Sync complete';
             syncDetailsDiv.innerHTML = '<h3>Synced Data Details:</h3>';
             data.syncedDetails.forEach(detail => {
               syncDetailsDiv.innerHTML += `<p>Date: ${detail.date}, Total Amount: $${detail.totalAmount.toFixed(2)}, Journal Entry ID: ${detail.journalEntryId}</p>`;
             });
           } catch (error) {
             syncStatusDiv.textContent = `Sync failed: ${error.message}`;
           }
         }
       </script>
     </body>
     </html>
